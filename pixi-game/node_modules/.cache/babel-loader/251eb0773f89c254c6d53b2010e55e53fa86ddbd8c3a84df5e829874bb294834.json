{"ast":null,"code":"var compileProgram = require('./shader/compileProgram'),\n  extractAttributes = require('./shader/extractAttributes'),\n  extractUniforms = require('./shader/extractUniforms'),\n  setPrecision = require('./shader/setPrecision'),\n  generateUniformAccessObject = require('./shader/generateUniformAccessObject');\n\n/**\n * Helper class to create a webGL Shader\n *\n * @class\n * @memberof PIXI.glCore\n * @param gl {WebGLRenderingContext}\n * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\n * @param fragmentSrc {string|string[]} The fragment shader source as an array of strings.\n * @param precision {string} The float precision of the shader. Options are 'lowp', 'mediump' or 'highp'.\n * @param attributeLocations {object} A key value pair showing which location eact attribute should sit eg {position:0, uvs:1}\n */\nvar Shader = function (gl, vertexSrc, fragmentSrc, precision, attributeLocations) {\n  /**\n   * The current WebGL rendering context\n   *\n   * @member {WebGLRenderingContext}\n   */\n  this.gl = gl;\n  if (precision) {\n    vertexSrc = setPrecision(vertexSrc, precision);\n    fragmentSrc = setPrecision(fragmentSrc, precision);\n  }\n\n  /**\n   * The shader program\n   *\n   * @member {WebGLProgram}\n   */\n  // First compile the program..\n  this.program = compileProgram(gl, vertexSrc, fragmentSrc, attributeLocations);\n\n  /**\n   * The attributes of the shader as an object containing the following properties\n   * {\n   * \ttype,\n   * \tsize,\n   * \tlocation,\n   * \tpointer\n   * }\n   * @member {Object}\n   */\n  // next extract the attributes\n  this.attributes = extractAttributes(gl, this.program);\n  this.uniformData = extractUniforms(gl, this.program);\n\n  /**\n   * The uniforms of the shader as an object containing the following properties\n   * {\n   * \tgl,\n   * \tdata\n   * }\n   * @member {Object}\n   */\n  this.uniforms = generateUniformAccessObject(gl, this.uniformData);\n};\n/**\n * Uses this shader\n * \n * @return {PIXI.glCore.GLShader} Returns itself.\n */\nShader.prototype.bind = function () {\n  this.gl.useProgram(this.program);\n  return this;\n};\n\n/**\n * Destroys this shader\n * TODO\n */\nShader.prototype.destroy = function () {\n  this.attributes = null;\n  this.uniformData = null;\n  this.uniforms = null;\n  var gl = this.gl;\n  gl.deleteProgram(this.program);\n};\nmodule.exports = Shader;","map":{"version":3,"names":["compileProgram","require","extractAttributes","extractUniforms","setPrecision","generateUniformAccessObject","Shader","gl","vertexSrc","fragmentSrc","precision","attributeLocations","program","attributes","uniformData","uniforms","prototype","bind","useProgram","destroy","deleteProgram","module","exports"],"sources":["/Users/jiahuajiang/node_modules/pixi-gl-core/src/GLShader.js"],"sourcesContent":["\nvar compileProgram = require('./shader/compileProgram'),\n\textractAttributes = require('./shader/extractAttributes'),\n\textractUniforms = require('./shader/extractUniforms'),\n\tsetPrecision = require('./shader/setPrecision'),\n\tgenerateUniformAccessObject = require('./shader/generateUniformAccessObject');\n\n/**\n * Helper class to create a webGL Shader\n *\n * @class\n * @memberof PIXI.glCore\n * @param gl {WebGLRenderingContext}\n * @param vertexSrc {string|string[]} The vertex shader source as an array of strings.\n * @param fragmentSrc {string|string[]} The fragment shader source as an array of strings.\n * @param precision {string} The float precision of the shader. Options are 'lowp', 'mediump' or 'highp'.\n * @param attributeLocations {object} A key value pair showing which location eact attribute should sit eg {position:0, uvs:1}\n */\nvar Shader = function(gl, vertexSrc, fragmentSrc, precision, attributeLocations)\n{\n\t/**\n\t * The current WebGL rendering context\n\t *\n\t * @member {WebGLRenderingContext}\n\t */\n\tthis.gl = gl;\n\n\tif(precision)\n\t{\n\t\tvertexSrc = setPrecision(vertexSrc, precision);\n\t\tfragmentSrc = setPrecision(fragmentSrc, precision);\n\t}\n\n\t/**\n\t * The shader program\n\t *\n\t * @member {WebGLProgram}\n\t */\n\t// First compile the program..\n\tthis.program = compileProgram(gl, vertexSrc, fragmentSrc, attributeLocations);\n\n\t/**\n\t * The attributes of the shader as an object containing the following properties\n\t * {\n\t * \ttype,\n\t * \tsize,\n\t * \tlocation,\n\t * \tpointer\n\t * }\n\t * @member {Object}\n\t */\n\t// next extract the attributes\n\tthis.attributes = extractAttributes(gl, this.program);\n\n    this.uniformData = extractUniforms(gl, this.program);\n\n\t/**\n\t * The uniforms of the shader as an object containing the following properties\n\t * {\n\t * \tgl,\n\t * \tdata\n\t * }\n\t * @member {Object}\n\t */\n\tthis.uniforms = generateUniformAccessObject( gl, this.uniformData );\n\n};\n/**\n * Uses this shader\n * \n * @return {PIXI.glCore.GLShader} Returns itself.\n */\nShader.prototype.bind = function()\n{\n\tthis.gl.useProgram(this.program);\n\treturn this;\n};\n\n/**\n * Destroys this shader\n * TODO\n */\nShader.prototype.destroy = function()\n{\n\tthis.attributes = null;\n\tthis.uniformData = null;\n\tthis.uniforms = null;\n\n\tvar gl = this.gl;\n\tgl.deleteProgram(this.program);\n};\n\n\nmodule.exports = Shader;\n"],"mappings":"AACA,IAAIA,cAAc,GAAGC,OAAO,CAAC,yBAAyB,CAAC;EACtDC,iBAAiB,GAAGD,OAAO,CAAC,4BAA4B,CAAC;EACzDE,eAAe,GAAGF,OAAO,CAAC,0BAA0B,CAAC;EACrDG,YAAY,GAAGH,OAAO,CAAC,uBAAuB,CAAC;EAC/CI,2BAA2B,GAAGJ,OAAO,CAAC,sCAAsC,CAAC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIK,MAAM,GAAG,SAAAA,CAASC,EAAE,EAAEC,SAAS,EAAEC,WAAW,EAAEC,SAAS,EAAEC,kBAAkB,EAC/E;EACC;AACD;AACA;AACA;AACA;EACC,IAAI,CAACJ,EAAE,GAAGA,EAAE;EAEZ,IAAGG,SAAS,EACZ;IACCF,SAAS,GAAGJ,YAAY,CAACI,SAAS,EAAEE,SAAS,CAAC;IAC9CD,WAAW,GAAGL,YAAY,CAACK,WAAW,EAAEC,SAAS,CAAC;EACnD;;EAEA;AACD;AACA;AACA;AACA;EACC;EACA,IAAI,CAACE,OAAO,GAAGZ,cAAc,CAACO,EAAE,EAAEC,SAAS,EAAEC,WAAW,EAAEE,kBAAkB,CAAC;;EAE7E;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;EACA,IAAI,CAACE,UAAU,GAAGX,iBAAiB,CAACK,EAAE,EAAE,IAAI,CAACK,OAAO,CAAC;EAElD,IAAI,CAACE,WAAW,GAAGX,eAAe,CAACI,EAAE,EAAE,IAAI,CAACK,OAAO,CAAC;;EAEvD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC,IAAI,CAACG,QAAQ,GAAGV,2BAA2B,CAAEE,EAAE,EAAE,IAAI,CAACO,WAAY,CAAC;AAEpE,CAAC;AACD;AACA;AACA;AACA;AACA;AACAR,MAAM,CAACU,SAAS,CAACC,IAAI,GAAG,YACxB;EACC,IAAI,CAACV,EAAE,CAACW,UAAU,CAAC,IAAI,CAACN,OAAO,CAAC;EAChC,OAAO,IAAI;AACZ,CAAC;;AAED;AACA;AACA;AACA;AACAN,MAAM,CAACU,SAAS,CAACG,OAAO,GAAG,YAC3B;EACC,IAAI,CAACN,UAAU,GAAG,IAAI;EACtB,IAAI,CAACC,WAAW,GAAG,IAAI;EACvB,IAAI,CAACC,QAAQ,GAAG,IAAI;EAEpB,IAAIR,EAAE,GAAG,IAAI,CAACA,EAAE;EAChBA,EAAE,CAACa,aAAa,CAAC,IAAI,CAACR,OAAO,CAAC;AAC/B,CAAC;AAGDS,MAAM,CAACC,OAAO,GAAGhB,MAAM"},"metadata":{},"sourceType":"script","externalDependencies":[]}