{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nvar _resourceLoader = require('resource-loader');\nvar _resourceLoader2 = _interopRequireDefault(_resourceLoader);\nvar _blob = require('resource-loader/lib/middlewares/parsing/blob');\nvar _eventemitter = require('eventemitter3');\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\nvar _textureParser = require('./textureParser');\nvar _textureParser2 = _interopRequireDefault(_textureParser);\nvar _spritesheetParser = require('./spritesheetParser');\nvar _spritesheetParser2 = _interopRequireDefault(_spritesheetParser);\nvar _bitmapFontParser = require('./bitmapFontParser');\nvar _bitmapFontParser2 = _interopRequireDefault(_bitmapFontParser);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\n/**\n *\n * The new loader, extends Resource Loader by Chad Engler: https://github.com/englercj/resource-loader\n *\n * ```js\n * const loader = PIXI.loader; // PixiJS exposes a premade instance for you to use.\n * //or\n * const loader = new PIXI.loaders.Loader(); // you can also create your own if you want\n *\n * const sprites = {};\n *\n * // Chainable `add` to enqueue a resource\n * loader.add('bunny', 'data/bunny.png')\n *       .add('spaceship', 'assets/spritesheet.json');\n * loader.add('scoreFont', 'assets/score.fnt');\n *\n * // Chainable `pre` to add a middleware that runs for each resource, *before* loading that resource.\n * // This is useful to implement custom caching modules (using filesystem, indexeddb, memory, etc).\n * loader.pre(cachingMiddleware);\n *\n * // Chainable `use` to add a middleware that runs for each resource, *after* loading that resource.\n * // This is useful to implement custom parsing modules (like spritesheet parsers, spine parser, etc).\n * loader.use(parsingMiddleware);\n *\n * // The `load` method loads the queue of resources, and calls the passed in callback called once all\n * // resources have loaded.\n * loader.load((loader, resources) => {\n *     // resources is an object where the key is the name of the resource loaded and the value is the resource object.\n *     // They have a couple default properties:\n *     // - `url`: The URL that the resource was loaded from\n *     // - `error`: The error that happened when trying to load (if any)\n *     // - `data`: The raw data that was loaded\n *     // also may contain other properties based on the middleware that runs.\n *     sprites.bunny = new PIXI.TilingSprite(resources.bunny.texture);\n *     sprites.spaceship = new PIXI.TilingSprite(resources.spaceship.texture);\n *     sprites.scoreFont = new PIXI.TilingSprite(resources.scoreFont.texture);\n * });\n *\n * // throughout the process multiple signals can be dispatched.\n * loader.onProgress.add(() => {}); // called once per loaded/errored file\n * loader.onError.add(() => {}); // called once per errored file\n * loader.onLoad.add(() => {}); // called once per loaded file\n * loader.onComplete.add(() => {}); // called once when the queued resources all load.\n * ```\n *\n * @see https://github.com/englercj/resource-loader\n *\n * @class\n * @extends module:resource-loader.ResourceLoader\n * @memberof PIXI.loaders\n */\nvar Loader = function (_ResourceLoader) {\n  _inherits(Loader, _ResourceLoader);\n\n  /**\n   * @param {string} [baseUrl=''] - The base url for all resources loaded by this loader.\n   * @param {number} [concurrency=10] - The number of resources to load concurrently.\n   */\n  function Loader(baseUrl, concurrency) {\n    _classCallCheck(this, Loader);\n    var _this = _possibleConstructorReturn(this, _ResourceLoader.call(this, baseUrl, concurrency));\n    _eventemitter2.default.call(_this);\n    for (var i = 0; i < Loader._pixiMiddleware.length; ++i) {\n      _this.use(Loader._pixiMiddleware[i]());\n    }\n\n    // Compat layer, translate the new v2 signals into old v1 events.\n    _this.onStart.add(function (l) {\n      return _this.emit('start', l);\n    });\n    _this.onProgress.add(function (l, r) {\n      return _this.emit('progress', l, r);\n    });\n    _this.onError.add(function (e, l, r) {\n      return _this.emit('error', e, l, r);\n    });\n    _this.onLoad.add(function (l, r) {\n      return _this.emit('load', l, r);\n    });\n    _this.onComplete.add(function (l, r) {\n      return _this.emit('complete', l, r);\n    });\n    return _this;\n  }\n\n  /**\n   * Adds a default middleware to the PixiJS loader.\n   *\n   * @static\n   * @param {Function} fn - The middleware to add.\n   */\n\n  Loader.addPixiMiddleware = function addPixiMiddleware(fn) {\n    Loader._pixiMiddleware.push(fn);\n  };\n\n  /**\n   * Destroy the loader, removes references.\n   */\n\n  Loader.prototype.destroy = function destroy() {\n    this.removeAllListeners();\n    this.reset();\n  };\n  return Loader;\n}(_resourceLoader2.default);\n\n// Copy EE3 prototype (mixin)\n\nexports.default = Loader;\nfor (var k in _eventemitter2.default.prototype) {\n  Loader.prototype[k] = _eventemitter2.default.prototype[k];\n}\nLoader._pixiMiddleware = [\n// parse any blob into more usable objects (e.g. Image)\n_blob.blobMiddlewareFactory,\n// parse any Image objects into textures\n_textureParser2.default,\n// parse any spritesheet data into multiple textures\n_spritesheetParser2.default,\n// parse bitmap font data into multiple textures\n_bitmapFontParser2.default];\n\n// Add custom extentions\nvar Resource = _resourceLoader2.default.Resource;\nResource.setExtensionXhrType('fnt', Resource.XHR_RESPONSE_TYPE.DOCUMENT);","map":{"version":3,"names":["_resourceLoader","require","_blob","_eventemitter","_textureParser","_spritesheetParser","_bitmapFontParser","Loader","baseUrl","concurrency","_classCallCheck","_this","_possibleConstructorReturn","_ResourceLoader","call","_eventemitter2","default","i","_pixiMiddleware","length","use","onStart","add","l","emit","onProgress","r","onError","e","onLoad","onComplete","addPixiMiddleware","fn","push","destroy","removeAllListeners","reset","k","prototype","blobMiddlewareFactory","_textureParser2","_spritesheetParser2","_bitmapFontParser2","Resource","_resourceLoader2","setExtensionXhrType","XHR_RESPONSE_TYPE","DOCUMENT"],"sources":["/Users/jiahuajiang/node_modules/pixi.js/src/loaders/loader.js"],"sourcesContent":["import ResourceLoader from 'resource-loader';\nimport { blobMiddlewareFactory } from 'resource-loader/lib/middlewares/parsing/blob';\nimport EventEmitter from 'eventemitter3';\nimport textureParser from './textureParser';\nimport spritesheetParser from './spritesheetParser';\nimport bitmapFontParser from './bitmapFontParser';\n\n/**\n *\n * The new loader, extends Resource Loader by Chad Engler: https://github.com/englercj/resource-loader\n *\n * ```js\n * const loader = PIXI.loader; // PixiJS exposes a premade instance for you to use.\n * //or\n * const loader = new PIXI.loaders.Loader(); // you can also create your own if you want\n *\n * const sprites = {};\n *\n * // Chainable `add` to enqueue a resource\n * loader.add('bunny', 'data/bunny.png')\n *       .add('spaceship', 'assets/spritesheet.json');\n * loader.add('scoreFont', 'assets/score.fnt');\n *\n * // Chainable `pre` to add a middleware that runs for each resource, *before* loading that resource.\n * // This is useful to implement custom caching modules (using filesystem, indexeddb, memory, etc).\n * loader.pre(cachingMiddleware);\n *\n * // Chainable `use` to add a middleware that runs for each resource, *after* loading that resource.\n * // This is useful to implement custom parsing modules (like spritesheet parsers, spine parser, etc).\n * loader.use(parsingMiddleware);\n *\n * // The `load` method loads the queue of resources, and calls the passed in callback called once all\n * // resources have loaded.\n * loader.load((loader, resources) => {\n *     // resources is an object where the key is the name of the resource loaded and the value is the resource object.\n *     // They have a couple default properties:\n *     // - `url`: The URL that the resource was loaded from\n *     // - `error`: The error that happened when trying to load (if any)\n *     // - `data`: The raw data that was loaded\n *     // also may contain other properties based on the middleware that runs.\n *     sprites.bunny = new PIXI.TilingSprite(resources.bunny.texture);\n *     sprites.spaceship = new PIXI.TilingSprite(resources.spaceship.texture);\n *     sprites.scoreFont = new PIXI.TilingSprite(resources.scoreFont.texture);\n * });\n *\n * // throughout the process multiple signals can be dispatched.\n * loader.onProgress.add(() => {}); // called once per loaded/errored file\n * loader.onError.add(() => {}); // called once per errored file\n * loader.onLoad.add(() => {}); // called once per loaded file\n * loader.onComplete.add(() => {}); // called once when the queued resources all load.\n * ```\n *\n * @see https://github.com/englercj/resource-loader\n *\n * @class\n * @extends module:resource-loader.ResourceLoader\n * @memberof PIXI.loaders\n */\nexport default class Loader extends ResourceLoader\n{\n    /**\n     * @param {string} [baseUrl=''] - The base url for all resources loaded by this loader.\n     * @param {number} [concurrency=10] - The number of resources to load concurrently.\n     */\n    constructor(baseUrl, concurrency)\n    {\n        super(baseUrl, concurrency);\n        EventEmitter.call(this);\n\n        for (let i = 0; i < Loader._pixiMiddleware.length; ++i)\n        {\n            this.use(Loader._pixiMiddleware[i]());\n        }\n\n        // Compat layer, translate the new v2 signals into old v1 events.\n        this.onStart.add((l) => this.emit('start', l));\n        this.onProgress.add((l, r) => this.emit('progress', l, r));\n        this.onError.add((e, l, r) => this.emit('error', e, l, r));\n        this.onLoad.add((l, r) => this.emit('load', l, r));\n        this.onComplete.add((l, r) => this.emit('complete', l, r));\n    }\n\n    /**\n     * Adds a default middleware to the PixiJS loader.\n     *\n     * @static\n     * @param {Function} fn - The middleware to add.\n     */\n    static addPixiMiddleware(fn)\n    {\n        Loader._pixiMiddleware.push(fn);\n    }\n\n    /**\n     * Destroy the loader, removes references.\n     */\n    destroy()\n    {\n        this.removeAllListeners();\n        this.reset();\n    }\n}\n\n// Copy EE3 prototype (mixin)\nfor (const k in EventEmitter.prototype)\n{\n    Loader.prototype[k] = EventEmitter.prototype[k];\n}\n\nLoader._pixiMiddleware = [\n    // parse any blob into more usable objects (e.g. Image)\n    blobMiddlewareFactory,\n    // parse any Image objects into textures\n    textureParser,\n    // parse any spritesheet data into multiple textures\n    spritesheetParser,\n    // parse bitmap font data into multiple textures\n    bitmapFontParser,\n];\n\n// Add custom extentions\nconst Resource = ResourceLoader.Resource;\n\nResource.setExtensionXhrType('fnt', Resource.XHR_RESPONSE_TYPE.DOCUMENT);\n"],"mappings":";;;AAAA,IAAAA,eAAA,GAAAC,OAAA;;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,aAAA,GAAAF,OAAA;;AACA,IAAAG,cAAA,GAAAH,OAAA;;AACA,IAAAI,kBAAA,GAAAJ,OAAA;;AACA,IAAAK,iBAAA,GAAAL,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAmDqBM,M;;;EAEjB;;;;EAIA,SAAAA,OAAYC,OAAZ,EAAqBC,WAArB,EACA;IAAAC,eAAA,OAAAH,MAAA;IAAA,IAAAI,KAAA,GAAAC,0BAAA,OACIC,eAAA,CAAAC,IAAA,OAAMN,OAAN,EAAeC,WAAf,CADJ;IAEIM,cAAA,CAAAC,OAAA,CAAaF,IAAb,CAAAH,KAAA;IAEA,KAAK,IAAIM,CAAA,GAAI,CAAb,EAAgBA,CAAA,GAAIV,MAAA,CAAOW,eAAP,CAAuBC,MAA3C,EAAmD,EAAEF,CAArD,EACA;MACIN,KAAA,CAAKS,GAAL,CAASb,MAAA,CAAOW,eAAP,CAAuBD,CAAvB,GAAT;IACH;;IAED;IACAN,KAAA,CAAKU,OAAL,CAAaC,GAAb,CAAiB,UAACC,CAAD;MAAA,OAAOZ,KAAA,CAAKa,IAAL,CAAU,OAAV,EAAmBD,CAAnB,CAAP;IAAA,CAAjB;IACAZ,KAAA,CAAKc,UAAL,CAAgBH,GAAhB,CAAoB,UAACC,CAAD,EAAIG,CAAJ;MAAA,OAAUf,KAAA,CAAKa,IAAL,CAAU,UAAV,EAAsBD,CAAtB,EAAyBG,CAAzB,CAAV;IAAA,CAApB;IACAf,KAAA,CAAKgB,OAAL,CAAaL,GAAb,CAAiB,UAACM,CAAD,EAAIL,CAAJ,EAAOG,CAAP;MAAA,OAAaf,KAAA,CAAKa,IAAL,CAAU,OAAV,EAAmBI,CAAnB,EAAsBL,CAAtB,EAAyBG,CAAzB,CAAb;IAAA,CAAjB;IACAf,KAAA,CAAKkB,MAAL,CAAYP,GAAZ,CAAgB,UAACC,CAAD,EAAIG,CAAJ;MAAA,OAAUf,KAAA,CAAKa,IAAL,CAAU,MAAV,EAAkBD,CAAlB,EAAqBG,CAArB,CAAV;IAAA,CAAhB;IACAf,KAAA,CAAKmB,UAAL,CAAgBR,GAAhB,CAAoB,UAACC,CAAD,EAAIG,CAAJ;MAAA,OAAUf,KAAA,CAAKa,IAAL,CAAU,UAAV,EAAsBD,CAAtB,EAAyBG,CAAzB,CAAV;IAAA,CAApB;IAdJ,OAAAf,KAAA;EAeC;;EAED;;;;;;;SAMOoB,iB,8BAAkBC,E,EACzB;IACIzB,MAAA,CAAOW,eAAP,CAAuBe,IAAvB,CAA4BD,EAA5B;EACH,C;;EAED;;;;mBAGAE,O,sBACA;IACI,KAAKC,kBAAL;IACA,KAAKC,KAAL;EACH,C;;;;AAGL;;kBA7CqB7B,M;AA8CrB,KAAK,IAAM8B,CAAX,IAAgBtB,cAAA,CAAAC,OAAA,CAAasB,SAA7B,EACA;EACI/B,MAAA,CAAO+B,SAAP,CAAiBD,CAAjB,IAAsBtB,cAAA,CAAAC,OAAA,CAAasB,SAAb,CAAuBD,CAAvB,CAAtB;AACH;AAED9B,MAAA,CAAOW,eAAP,GAAyB;AACrB;AADqBhB,KAAA,CAAAqC,qBAAA;AAGrB;AAHqBC,eAAA,CAAAxB,OAAA;AAKrB;AALqByB,mBAAA,CAAAzB,OAAA;AAOrB;AAPqB0B,kBAAA,CAAA1B,OAAA,CAAzB;;AAWA;AACA,IAAM2B,QAAA,GAAWC,gBAAA,CAAA5B,OAAA,CAAe2B,QAAhC;AAEAA,QAAA,CAASE,mBAAT,CAA6B,KAA7B,EAAoCF,QAAA,CAASG,iBAAT,CAA2BC,QAA/D"},"metadata":{},"sourceType":"script","externalDependencies":[]}