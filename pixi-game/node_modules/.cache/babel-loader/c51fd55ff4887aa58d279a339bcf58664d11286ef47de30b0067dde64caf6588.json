{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.default = determineCrossOrigin;\nvar _url2 = require('url');\nvar _url3 = _interopRequireDefault(_url2);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar tempAnchor = void 0;\n\n/**\n * Sets the `crossOrigin` property for this resource based on if the url\n * for this resource is cross-origin. If crossOrigin was manually set, this\n * function does nothing.\n * Nipped from the resource loader!\n *\n * @ignore\n * @param {string} url - The url to test.\n * @param {object} [loc=window.location] - The location object to test against.\n * @return {string} The crossOrigin value to use (or empty string for none).\n */\nfunction determineCrossOrigin(url) {\n  var loc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.location;\n\n  // data: and javascript: urls are considered same-origin\n  if (url.indexOf('data:') === 0) {\n    return '';\n  }\n\n  // default is window.location\n  loc = loc || window.location;\n  if (!tempAnchor) {\n    tempAnchor = document.createElement('a');\n  }\n\n  // let the browser determine the full href for the url of this resource and then\n  // parse with the node url lib, we can't use the properties of the anchor element\n  // because they don't work in IE9 :(\n  tempAnchor.href = url;\n  url = _url3.default.parse(tempAnchor.href);\n  var samePort = !url.port && loc.port === '' || url.port === loc.port;\n\n  // if cross origin\n  if (url.hostname !== loc.hostname || !samePort || url.protocol !== loc.protocol) {\n    return 'anonymous';\n  }\n  return '';\n}","map":{"version":3,"names":["determineCrossOrigin","_url2","require","tempAnchor","url","loc","arguments","length","undefined","window","location","indexOf","document","createElement","href","_url3","default","parse","samePort","port","hostname","protocol"],"sources":["/Users/jiahuajiang/node_modules/pixi.js/src/core/utils/determineCrossOrigin.js"],"sourcesContent":["import _url from 'url';\n\nlet tempAnchor;\n\n/**\n * Sets the `crossOrigin` property for this resource based on if the url\n * for this resource is cross-origin. If crossOrigin was manually set, this\n * function does nothing.\n * Nipped from the resource loader!\n *\n * @ignore\n * @param {string} url - The url to test.\n * @param {object} [loc=window.location] - The location object to test against.\n * @return {string} The crossOrigin value to use (or empty string for none).\n */\nexport default function determineCrossOrigin(url, loc = window.location)\n{\n    // data: and javascript: urls are considered same-origin\n    if (url.indexOf('data:') === 0)\n    {\n        return '';\n    }\n\n    // default is window.location\n    loc = loc || window.location;\n\n    if (!tempAnchor)\n    {\n        tempAnchor = document.createElement('a');\n    }\n\n    // let the browser determine the full href for the url of this resource and then\n    // parse with the node url lib, we can't use the properties of the anchor element\n    // because they don't work in IE9 :(\n    tempAnchor.href = url;\n    url = _url.parse(tempAnchor.href);\n\n    const samePort = (!url.port && loc.port === '') || (url.port === loc.port);\n\n    // if cross origin\n    if (url.hostname !== loc.hostname || !samePort || url.protocol !== loc.protocol)\n    {\n        return 'anonymous';\n    }\n\n    return '';\n}\n"],"mappings":";;;kBAewBA,oB;AAfxB,IAAAC,KAAA,GAAAC,OAAA;;;;;;;AAEA,IAAIC,UAAA,SAAJ;;AAEA;;;;;;;;;;;AAWe,SAASH,oBAATA,CAA8BI,GAA9B,EACf;EAAA,IADkDC,GAClD,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MADwDG,MAAA,CAAOC,QAC/D;;EACI;EACA,IAAIN,GAAA,CAAIO,OAAJ,CAAY,OAAZ,MAAyB,CAA7B,EACA;IACI,OAAO,EAAP;EACH;;EAED;EACAN,GAAA,GAAMA,GAAA,IAAOI,MAAA,CAAOC,QAApB;EAEA,IAAI,CAACP,UAAL,EACA;IACIA,UAAA,GAAaS,QAAA,CAASC,aAAT,CAAuB,GAAvB,CAAb;EACH;;EAED;EACA;EACA;EACAV,UAAA,CAAWW,IAAX,GAAkBV,GAAlB;EACAA,GAAA,GAAMW,KAAA,CAAAC,OAAA,CAAKC,KAAL,CAAWd,UAAA,CAAWW,IAAtB,CAAN;EAEA,IAAMI,QAAA,GAAY,CAACd,GAAA,CAAIe,IAAL,IAAad,GAAA,CAAIc,IAAJ,KAAa,EAA3B,IAAmCf,GAAA,CAAIe,IAAJ,KAAad,GAAA,CAAIc,IAArE;;EAEA;EACA,IAAIf,GAAA,CAAIgB,QAAJ,KAAiBf,GAAA,CAAIe,QAArB,IAAiC,CAACF,QAAlC,IAA8Cd,GAAA,CAAIiB,QAAJ,KAAiBhB,GAAA,CAAIgB,QAAvE,EACA;IACI,OAAO,WAAP;EACH;EAED,OAAO,EAAP;AACH"},"metadata":{},"sourceType":"script","externalDependencies":[]}